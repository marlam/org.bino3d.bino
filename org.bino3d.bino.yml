app-id: org.bino3d.bino
runtime: org.kde.Platform
runtime-version: '6.9'
sdk: org.kde.Sdk
command: bino
finish-args:
  # X11 + XShm access
  - --share=ipc
  - --socket=fallback-x11
  # Wayland access
  - --socket=wayland
  # Play videos from the net
  - --share=network
  # OpenGL rendering (dri) and Webcam capturing (all)
  - --device=all
  # Audio output
  - --socket=pulseaudio
  # Play video files, but only read access required
  - --filesystem=host:ro
cleanup:
  - '/include'
  - '/lib/*.a'
  - '/lib/cmake'
modules:
  - name: openvr
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: archive
        url: https://github.com/ValveSoftware/openvr/archive/refs/tags/v2.12.14.tar.gz
        sha256: becc2e6b956d1b98d66e2cc75fd8b20db94eb5af584ec360a4dad7e8adec3176
    cleanup:
      - '/share/pkgconfig'
  - name: vrpn
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
      - -DVRPN_BUILD_CLIENTS=OFF
      - -DVRPN_BUILD_SERVERS=OFF
      - -DVRPN_BUILD_SERVER_LIBRARY=OFF
      - -DVRPN_BUILD_TEST_RPC_GENERATION=OFF
      - -DVRPN_BUILD_PYTHON_HANDCODED_3X=OFF
    sources:
      - type: archive
        url: https://github.com/vrpn/vrpn/archive/refs/tags/v07.36.tar.gz
        sha256: bed00ae060fc7c0cfdaa2fa01f6f2db4976d431971e8824b710eb63cfbba0df7
  - name: qvr
    buildsystem: cmake-ninja
    subdir: libqvr
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: archive
        url: https://marlam.de/qvr/releases/qvr-4.1.0.tar.gz
        sha256: e6f83f89da8dccdc7dfedf726d2ee742336668549599a74574df928b162b1d53
  - name: bino
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: archive
        url: https://bino3d.org/releases/bino-2.6.tar.gz
        sha256: 843cac2c951dd933e55987717223a45462d3fb0f332fc6311e173d8dabe66e5c
